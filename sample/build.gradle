import com.novoda.gradle.command.*

buildscript {
    repositories {
        mavenCentral()
        maven {
            url "https://oss.sonatype.org/content/repositories/snapshots/"
        }
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:0.5.+'
        classpath 'com.novoda:gradle-android-command-plugin:0.9.0-SNAPSHOT'
    }
}
apply plugin: 'android'
apply plugin: 'android-command'

repositories {
    mavenCentral()
}

android {
    compileSdkVersion 18
    buildToolsVersion "18.0.1"

    defaultConfig {
        minSdkVersion 7
        targetSdkVersion 16
    }

    buildTypes {
        debug {}
        release {}
        QA {}
    }

    productFlavors {

        beta {
        }

        normal {
        }

        free {
        }

        paid {
        }
    }
}

dependencies {
    compile 'com.android.support:appcompat-v7:18.0.0'
}

project.android.createTasks("install", Apk).all {
    doFirst { command = "$adb -s $deviceId install -r $apkPath" }
}

project.android.createTasks("clearPreferences", Apk).all {
    doFirst { command = "$adb -s $deviceId shell pm clear $packageName" }
}

project.android.createTasks("monkey", Apk).all {
    doFirst { command = "$adb -s $deviceId shell monkey -p $packageName -v 50" }
}

project.android.createTasks("run", Apk).all {
    doFirst { command = "$adb -s $deviceId shell am start -a android.intent.action.MAIN -c android.intent.category.LAUNCHER $packageName/$launchableActivity" }
}